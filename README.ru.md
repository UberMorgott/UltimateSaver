# UltimateSaver

[![en](https://img.shields.io/badge/lang-English-blue)](README.md) [![ru](https://img.shields.io/badge/lang-Русский-green)](README.ru.md)

Мод для Hytale, сохраняющий заряд ульты (SignatureEnergy) для каждого оружия индивидуально.

## Проблема

В ванильной Hytale **заряд ульты теряется при смене оружия**. Если зарядить ульту на 80% и переключиться на другое оружие — заряд пропадает. Этот мод это исправляет.

## Возможности

- **Заряд ульты сохраняется при смене оружия** — каждое оружие хранит свой SignatureEnergy в metadata предмета
- **Индивидуальный трекинг заряда** — каждое оружие хранит свой уровень заряда
- **Частичный заряд** — сохраняется любой уровень заряда, не только полный
- **Персистентное хранение** — заряд сохраняется при: смене оружия, хранении в сундуке, торговле
- **Нулевой оверхед** — событийная архитектура, без тик-поллинга

## Требования

- **Hyxin** — загрузчик Mixin для Hytale
  - [CurseForge](https://www.curseforge.com/hytale/mods/hyxin)
  - [GitHub](https://github.com/Jenya705/Hyxin)

## Установка

### Одиночная игра

1. Скачайте `Hyxin.jar` и поместите в:
   ```
   UserData/EarlyPlugins/
   ```

2. Скачайте `UltimateSaver-x.x.x.jar` и поместите в **папку сохранения мира**:
   ```
   UserData/Saves/<ИмяМира>/earlyplugins
   ```
   (Создайте папку `earlyplugins` если её нет)

3. Запустите игру и загрузите мир

> **Linux:** Папка должна называться именно `earlyplugins` (в нижнем регистре). Linux чувствителен к регистру, `EarlyPlugins` не сработает.

### Выделенный сервер

1. Скачайте `Hyxin.jar` и поместите в:
   ```
   <КореньСервера>/earlyplugins/
   ```

2. Скачайте `UltimateSaver-x.x.x.jar` и поместите в:
   ```
   <КореньСервера>/earlyplugins/
   ```

> **Linux:** Папка должна называться именно `earlyplugins` (в нижнем регистре).

3. Запустите сервер

## Как работает

При смене оружия текущий SignatureEnergy (заряд ульты) сохраняется в metadata предмета. При переключении обратно — заряд восстанавливается из metadata.

Это позволяет иметь несколько оружий с разными уровнями заряда — для боевых сетапов с заранее заряженными ультами.

## Совместимость

- Работает с любым оружием, использующим стандартную систему стата SignatureEnergy
- Совместим с другими модами, не модифицирующими поведение ульт

## Credits

- **Автор:** Morgott
- **Mixin Framework:** Hyxin by Jenya705 — [CurseForge](https://www.curseforge.com/hytale/mods/hyxin) | [GitHub](https://github.com/Jenya705/Hyxin)
